{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Bambu User Auth Service"
  },
  "host": "",
  "basePath": "/api/v1",
  "schemes": ["http"],
  "produces": ["application/json"],
  "paths": {
    "/health": {
      "get": {
        "tags": ["User"],
        "summary": "Health check",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "service": {
                  "type": "string",
                  "example": "user=auth"
                },
                "status": {
                  "type": "string",
                  "example": "up"
                },
                "uptime": {
                  "type": "number",
                  "example": 31.122017972
                },
                "timestamp": {
                  "type": "integer",
                  "example": 1593574008334
                }
              }
            }
          }
        }
      }
    },
    "/create": {
      "post": {
        "tags": ["User"],
        "summary": "Create user",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "example": "jack@bambu.life"
                },
                "username": {
                  "type": "string",
                  "example": "jack"
                },
                "firstName": {
                  "type": "string",
                  "example": "Jack"
                },
                "lastName": {
                  "type": "string",
                  "example": "Daniel"
                },
                "password": {
                  "type": "string",
                  "example": "1234abcd"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully create a new user",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "example": "4b911122-1d69-46df-b797-182260888999"
                },
                "refId": {
                  "type": "string",
                  "example": "7bbb722d-826b-4f43-9ea9-10e0c1bd4532"
                },
                "emailSent": {
                  "type": "boolean",
                  "example": true
                }
              }
            }
          },
          "409": {
            "description": "User exists with same username or email",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User exists with same username or User exists with same email"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Username not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/verify-email": {
      "post": {
        "tags": ["User"],
        "summary": "Verify Email",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "uid": {
                  "type": "string",
                  "example": "8b70dded-3ae1-40fe-8d9b-6d7ca0ec12sd"
                },
                "otp": {
                  "type": "string",
                  "example": "xxxx"
                },
                "refId": {
                  "type": "string",
                  "example": "7bbb722d-826b-4f43-9ea9-10e0c1bd4532"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Email verified successfully",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Successfully verified"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "UserId not exists or it cannot be empty"
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User not found"
                }
              }
            }
          },
          "400": {
            "description": "Error: Bad Request",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Invalid OTP"
                }
              }
            }
          },
          "500": {
            "description": "Error: Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Internal Server Error"
                }
              }
            }
          }
        }
      }
    },
    "/request-token": {
      "post": {
        "tags": ["User"],
        "summary": "Request Token",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "userId": {
                  "type": "string",
                  "example": "8b70dded-3ae1-40fe-8d9b-6d7ca0ec12sd"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "example": "4b911122-1d69-46df-b797-182260888999"
                },
                "refId": {
                  "type": "string",
                  "example": "7bbb722d-826b-4f43-9ea9-10e0c1bd4532"
                },
                "emailSent": {
                  "type": "boolean",
                  "example": true
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User not found"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "UserId does not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/login": {
      "post": {
        "tags": ["User"],
        "summary": "User Login",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "username": {
                  "type": "string",
                  "example": "jack"
                },
                "password": {
                  "type": "string",
                  "example": "jack123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully LoggedIn",
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string",
                  "example": "xxxxxxxxxx"
                },
                "expires_in": {
                  "type": "number",
                  "example": 300
                },
                "refresh_expires_in": {
                  "type": "number",
                  "example": 1800
                },
                "refresh_token": {
                  "type": "string",
                  "example": "xxxxxxxxxx"
                },
                "token_type": {
                  "type": "string",
                  "example": "bearer"
                },
                "not-before-policy": {
                  "type": "number",
                  "example": 0
                },
                "session_state": {
                  "type": "string",
                  "example": "70344b3b-d945-460e-acdda0-35b9ddee3a2c"
                },
                "scope": {
                  "type": "string",
                  "example": "profile email"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "'Username does not exists or it cannot be empty"
                }
              }
            }
          },
          "401": {
            "description": "Error: Unauthorized",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Invalid user credentials"
                }
              }
            }
          },
          "400": {
            "description": "Error: Bad Request",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Email Verification Required"
                },
                "uid": {
                  "type": "string",
                  "example": "f3sds134-dfd2-gg13-fgf4"
                }
              }
            }
          },
          "403": {
            "description": "Error: Forbidden",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Account Disable"
                }
              }
            }
          }
        }
      }
    },
    "/forgot-password": {
      "post": {
        "tags": ["User"],
        "summary": "Forgot password",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "scope": {
                  "type": "string",
                  "example": "email"
                },
                "value": {
                  "type": "string",
                  "example": "jackdaniel@example.com"
                },
                "newPassword": {
                  "type": "string",
                  "example": "Password"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Forgot password request sent to email ",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Request sent to email"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Email is not exists or it cannot be empty"
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User not found"
                }
              }
            }
          }
        }
      }
    },
    "/get-user-by-email-token": {
      "get": {
        "tags": ["User"],
        "summary": "Get User By Email token",
        "parameters": [
          {
            "name": "email_token",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "email_token": {
                  "type": "string",
                  "example": "7nw6MeFv9ioU8jVwYcC8PyDbNN6o9DKqyMnmGFIbzU6M3mgRrViN7TDZyU9NvlTt7KHxOUrV"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "'Email token does not exists or has expired"
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Email token not found"
                }
              }
            }
          }
        }
      }
    },
    "/update-user-converted": {
      "post": {
        "tags": ["User"],
        "summary": "Update converted user by email",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email_token": {
                  "type": "string",
                  "example": "kljsnfgdh87y34rhienfher87uvneunfejnfi78h"
                },
                "password": {
                  "type": "string",
                  "example": "mypassword"
                },
                "confirm_password": {
                  "type": "string",
                  "example": "mypassword"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User updated"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "'Email token does not exists or it cannot be empty"
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Email token not found"
                }
              }
            }
          }
        }
      }
    },
    "/email-exist": {
      "post": {
        "tags": ["User"],
        "summary": "Check email exists",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "example": "jack123@gmail.com"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "email exists",
            "schema": {
              "type": "object",
              "properties": {
                "exist": {
                  "type": "boolean",
                  "example": false
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Email is not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/username-exist": {
      "post": {
        "tags": ["User"],
        "summary": "Check username exists",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "username": {
                  "type": "string",
                  "example": "jack_daniel"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "username exists",
            "schema": {
              "type": "object",
              "properties": {
                "exist": {
                  "type": "boolean",
                  "example": false
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Username is not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/email-verified": {
      "post": {
        "tags": ["User"],
        "summary": "Check email is verified or not",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "uid": {
                  "type": "string",
                  "example": "8b70dded-3ae1-40fe-8d9b-6d7ca0ec12sd"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Email verified status",
            "schema": {
              "type": "object",
              "properties": {
                "verified": {
                  "type": "boolean",
                  "example": false
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "uid is not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/change-password": {
      "post": {
        "tags": ["User"],
        "summary": "Change users login password",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "username": {
                  "type": "string",
                  "example": "jack"
                },
                "password": {
                  "type": "string",
                  "example": "jack123"
                },
                "refId": {
                  "type": "string",
                  "example": "beec87c7-acd9-402e-b291-2539ea5e372a"
                },
                "otp": {
                  "type": "string",
                  "example": "443514"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully Changed Password",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Password changed successfully!"
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User not found!"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Username is not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/check-password": {
      "post": {
        "tags": ["User"],
        "summary": "Check users current password is correct",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "username": {
                  "type": "string",
                  "example": "jack"
                },
                "password": {
                  "type": "string",
                  "example": "jack123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Check password is correct or not",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "boolean",
                  "example": true
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Username is not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/password-change/request": {
      "post": {
        "tags": ["User"],
        "summary": "Request Password Change Token",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "userId": {
                  "type": "string",
                  "example": "8b70dded-3ae1-40fe-8d9b-6d7ca0ec12sd"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "example": "4b911122-1d69-46df-b797-182260888999"
                },
                "refId": {
                  "type": "string",
                  "example": "7bbb722d-826b-4f43-9ea9-10e0c1bd4532"
                },
                "emailSent": {
                  "type": "boolean",
                  "example": true
                },
                "smsSent": {
                  "type": "boolean",
                  "example": true
                }
              }
            }
          },
          "404": {
            "description": "Error: Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "User not found"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "UserId does not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    },
    "/admin-reset-password": {
      "post": {
        "tags": ["User"],
        "summary": "Check users current password is correct",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "userId": {
                  "type": "string",
                  "example": "12ddnd-dj2931-83hdb2-3132d"
                },
                "password": {
                  "type": "string",
                  "example": "jack123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success!",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Password changed successfully!"
                }
              }
            }
          },
          "422": {
            "description": "Error: Unprocessable Entity",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Username is not exists or it cannot be empty"
                }
              }
            }
          }
        }
      }
    }
  }
}
